<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Roboac AMR - <%= title %>
  </title>
  <link rel="icon" type="image/jpg" href="../images/logo.png" />

  <!-- ####### MAKE IT OFFLINE #######  -->

  <!-- Google Font: Source Sans Pro -->
  <!-- <link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Thai:wght@300;400&display=swap" rel="stylesheet"> -->

  <!-- <link href="/fonts/nato-font/css.css" rel="stylesheet">
  <link href="/fonts/nato-font/css2.css" rel="stylesheet"> -->


  <!-- <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Thai:wght@300;400&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,400i,700&display=fallback"> -->


  <!-- ####### MAKE IT OFFLINE #######  -->



  <!-- Font Awesome Icons -->
  <link rel="stylesheet" href="plugins/fontawesome-free/css/all.min.css">
  <!-- IonIcons -->
  <!-- <link rel="stylesheet" href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css"> -->
  <!-- Theme style -->
  <link rel="stylesheet" href="dist/css/adminlte.min.css">


  <!-- ============================== Script ==============================-->
  <!-- jQuery -->
  <script src="../../plugins/jquery/jquery.min.js"></script>
  <!-- Bootstrap 4 -->
  <script src="../../plugins/bootstrap/js/bootstrap.bundle.min.js"></script>
  <!-- DataTables  & Plugins -->

  <script src="../../plugins/jszip/jszip.min.js"></script>
  <script src="../../plugins/pdfmake/pdfmake.min.js"></script>
  <script src="../../plugins/pdfmake/vfs_fonts.js"></script>


  <!-- Bootstrap -->
  <script src="plugins/bootstrap/js/bootstrap.bundle.min.js"></script>
  <!-- AdminLTE -->
  <script src="dist/js/adminlte.js"></script>
  <!-- ICON -->
  <!-- <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.3/font/bootstrap-icons.css"> -->
  <!-- ============================== Script ==============================-->
  <!-- Alert  -->
  <link rel="stylesheet" href="../../plugins/toastr/toastr.min.css">
  <script src="../../plugins/toastr/toastr.min.js"></script>
  <!-- Select2 -->
  <link rel="stylesheet" href="../../plugins/select2/css/select2.min.css">
  <link rel="stylesheet" href="../../plugins/select2-bootstrap4-theme/select2-bootstrap4.min.css">
  <script src="../../plugins/select2/js/select2.full.min.js"></script>

  <!-- Time picker  -->
  <link rel="stylesheet" href="dist/css/timepicker.min.css">
  <script src="dist/js/timepicker.min.js"></script>


  <script src="/sweetalert2/sweetalert2.all.min.js"></script>




  <!-- ####### MAKE IT OFFLINE #######  -->

  <!-- <script src="https://cdn.jsdelivr.net/npm/three@0.89.0/build/three.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/eventemitter2@6.4/lib/eventemitter2.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/roslib@1/build/roslib.js"></script> -->

  <script src="../build/rosjs/three.min.js"></script>
  <script src="../build/rosjs/eventemitter2.js"></script>
  <script src="../build/rosjs/roslib.js"></script>

  <!-- ####### MAKE IT OFFLINE #######  -->

  <script src="../build/ros3d.js"></script>

  <!-- New gens -->
  <link href="vendor/fontawesome-free/css/all.min.css" rel="stylesheet" type="text/css">
  <link href="css/sb-admin-2.min.css" rel="stylesheet">

  <style>
    @font-face {
      font-family: 'Noto Sans Thai';
      font-style: normal;
      font-weight: 400;
      src: url('/fonts/NotoSansThai-VariableFont_wdth,wght.ttf') format('truetype');
    }

    /* Use the font in your CSS */
    body {
      font-family: 'Noto Sans Thai';
    }
  </style>
</head>

<body id="page-top">

  <!-- Page Wrapper -->
  <div id="wrapper">

    <!-- Sidebar -->
    <ul class="navbar-nav bg-gradient-primary sidebar sidebar-dark accordion" id="accordionSidebar">

      <!-- Sidebar - Brand -->
      <a class="sidebar-brand d-flex align-items-center justify-content-center" href="index.html">
        <div class="sidebar-brand-icon rotate-n-15">
          <!-- <i class="fas fa-laugh-wink"></i> -->
        </div>
        <div class="sidebar-brand-text mx-3">MEC-BOT</div>
      </a>

      <!-- Divider -->
      <hr class="sidebar-divider my-0">

      <!-- Nav Item - Dashboard -->
      <li class="nav-item active">
        <a class="nav-link" href="/">
          <i class="fas fa-fw fa-tachometer-alt"></i>
          <span style="font-size: larger; padding-left: 0.3rem;">หน้าหลัก</span></a>
      </li>

      <!-- Divider -->
      <hr class="sidebar-divider">

      <!-- Heading -->
      <div class="sidebar-heading">
        Interface
      </div>

      <!-- Nav ITEM -->
      <li class="nav-item">
        <a class="nav-link" href="/slam">
          <img src="/images/maps-c.png" style="width: 1.7rem;">
          <span  style="font-size: larger; padding-left: 0.3rem; ">สร้างแผนที่</span></a>
      </li>

      <li class="nav-item">
        <a class="nav-link" href="/waypoint">
          <img src="/images/route-c.png" style="width: 1.7rem;">
          <span  style="font-size: larger; padding-left: 0.3rem; ">สร้างเส้นทาง</span></a>
      </li>

      <li class="nav-item">
        <a class="nav-link" href="/navigation">
          <img src="/images/navigation-c.png" style="width: 1.7rem;">
          <span  style="font-size: larger; padding-left: 0.3rem; ">ควบคุม Robot</span></a>
      </li>











    </ul>
    <!-- End of Sidebar -->

    <!-- Content Wrapper -->
    <div id="content-wrapper" class="d-flex flex-column">

      <!-- Main Content -->
      <div id="content">

        <!-- Topbar -->
        <nav class="navbar navbar-expand navbar-light bg-white topbar mb-4 static-top shadow">

          <!-- Sidebar Toggle (Topbar) -->
          <button id="sidebarToggleTop" class="btn btn-link d-md-none rounded-circle mr-3">
            <i class="fa fa-bars"></i>
          </button>


          <!-- Topbar Navbar -->
          <ul class="navbar-nav ml-auto">

            <!-- Nav Item - User Information -->
            <li class="nav-item dropdown no-arrow">
              <a class="nav-link dropdown-toggle" href="#" id="userDropdown" role="button" data-toggle="dropdown"
                aria-haspopup="true" aria-expanded="false">
                <span class="mr-2 d-none d-lg-inline text-gray-600 small">Douglas McGee</span>
                <img class="img-profile rounded-circle" src="img/undraw_profile.svg">
              </a>
              <!-- Dropdown - User Information -->
              <div class="dropdown-menu dropdown-menu-right shadow animated--grow-in" aria-labelledby="userDropdown">
                <a class="dropdown-item" href="#">
                  <i class="fas fa-user fa-sm fa-fw mr-2 text-gray-400"></i>
                  Profile
                </a>
                <a class="dropdown-item" href="#">
                  <i class="fas fa-cogs fa-sm fa-fw mr-2 text-gray-400"></i>
                  Settings
                </a>
                <a class="dropdown-item" href="#">
                  <i class="fas fa-list fa-sm fa-fw mr-2 text-gray-400"></i>
                  Activity Log
                </a>
                <div class="dropdown-divider"></div>
                <a class="dropdown-item" href="#" data-toggle="modal" data-target="#logoutModal">
                  <i class="fas fa-sign-out-alt fa-sm fa-fw mr-2 text-gray-400"></i>
                  Logout
                </a>
              </div>
            </li>

          </ul>

        </nav>



        <script>
          let id = ['dashboard', 'slam', 'waypoint', 'navigation'];
          let status = '<%= activity_state.activity %>';
          for (let i of id) {
            document.querySelector('#' + i).addEventListener('click', (event) => {
              event.preventDefault();

              if (status !== 'free') {
                Swal.fire({
                  title: `ต้องการปิดระบบ ${status} ?`,
                  icon: 'warning',
                  showCancelButton: true,
                  confirmButtonColor: '#3085d6',
                  cancelButtonColor: '#d33',
                  confirmButtonText: 'ยืนยัน',
                  cancelButtonText: 'ยกเลิก'
                }).then((result) => {
                  if (result.isConfirmed) {
                    axios.get(`/${status}_config?mode=close`)
                      .then(response => {
                        if (response.data == 'OK') {
                          alert_fire('ปิดระบบเรียบร้อยเเล้ว')
                        } else {
                          alert_error('Error')
                        }
                        setTimeout(() => {
                          window.location.pathname = document.querySelector('#' + i).getAttribute('href')
                        }, 250);
                      })
                      .catch(error => {
                        console.log(error);
                        alert_error('Error')
                      });
                  }
                })

              } else {
                window.location.pathname = document.querySelector('#' + i).getAttribute('href')
              }

            })
          }
        </script>